{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///E:/auspicious/crud/my-app/src/app/createform/page.js"],"sourcesContent":["\"use client\";\r\nimport axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nfunction Createform() {\r\n  const [data, setData] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n  const [editId, setEditId] = useState(null);\r\n  const [error, setError] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n  const [users, setUsers] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const res = await axios.get(`${process.env.NEXT_PUBLIC_API_URL}/getallusers`);\r\n      setUsers(res.data.user); \r\n    } catch (err) {\r\n      console.log(\"Fetch error:\", err);\r\n    }\r\n  };\r\n\r\n \r\n  const handleChange = (e) => {\r\n    setData({ ...data, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (editId) {\r\n       \r\n        const res = await axios.put(\r\n          `${process.env.NEXT_PUBLIC_API_URL}/updateuser/${editId}`,\r\n          data\r\n        );\r\n        if (res.status === 200) {\r\n          setMessage(\"User updated successfully\");\r\n        } else {\r\n          setError(\"Failed to update user\");\r\n        }\r\n      } else {\r\n      \r\n        const res = await axios.post(\r\n          `${process.env.NEXT_PUBLIC_API_URL}/createuser`,\r\n          data\r\n        );\r\n        if (res.status === 200) {\r\n          setMessage(\"User created successfully\");\r\n        } else {\r\n          setError(\"Failed to create user\");\r\n        }\r\n      }\r\n\r\n      fetchUsers();\r\n      setData({ name: \"\", email: \"\", password: \"\" });\r\n      setEditId(null);\r\n      setError(\"\");\r\n    } catch (err) {\r\n      console.log(\"Submit error:\", err);\r\n      setError(\"Server error\");\r\n    }\r\n  }; \r\n  const handleEdit = (user) => {\r\n    setData({\r\n      name: user.name,\r\n      email: user.email,\r\n      password: user.password,\r\n    });\r\n    setEditId(user._id);\r\n    setMessage(\"\");\r\n    setError(\"\");\r\n  };\r\n\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      const res = await axios.delete(\r\n        `${process.env.NEXT_PUBLIC_API_URL}/deleteuser/${id}`\r\n      );\r\n        setMessage(\"User deleted successfully\");\r\n        setError(\"\");\r\n        fetchUsers();\r\n    } catch (err) {\r\n      console.log(\"Delete error:\", err);\r\n      setError(\"Server error\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"h-auto min-h-screen bg-blue-950 p-5\">\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className=\"bg-gray-300 w-full md:w-1/2 mx-auto space-y-4 p-6 rounded\"\r\n      >\r\n        <h1 className=\"text-xl font-bold text-center\">USER FORM</h1>\r\n        <input\r\n          placeholder=\"Name\"\r\n          className=\"p-2 block w-full border border-gray-500 rounded\"\r\n          name=\"name\"\r\n          value={data.name}\r\n          onChange={handleChange}\r\n        />\r\n        <input\r\n          placeholder=\"Email\"\r\n          className=\"p-2 block w-full border border-gray-500 rounded\"\r\n          name=\"email\"\r\n          value={data.email}\r\n          onChange={handleChange}\r\n        />\r\n        <input\r\n          placeholder=\"Password\"\r\n          className=\"p-2 block w-full border border-gray-500 rounded\"\r\n          name=\"password\"\r\n          value={data.password}\r\n          onChange={handleChange}\r\n        />\r\n        <button className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\">\r\n          {editId ? \"Update User\" : \"Create User\"}\r\n        </button>\r\n        {error && <p className=\"text-red-500\">{error}</p>}\r\n        {message && <p className=\"text-green-500\">{message}</p>}\r\n      </form>\r\n\r\n      <h2 className=\"text-white text-center mt-8 text-2xl\">Users List</h2>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-6\">\r\n        {users.map((user) => (\r\n          <div\r\n\r\n            key={user._id}\r\n            className=\"border border-white p-4 rounded text-white bg-gray-800\"\r\n          >\r\n            <p><strong>Name:</strong> {user.name}</p>\r\n            <p><strong>Email:</strong> {user.email}</p>\r\n            <p><strong>Password:</strong> {user.password}</p>\r\n            <div className=\"mt-2 flex gap-2\">\r\n              <button\r\n                onClick={() => handleEdit(user)}\r\n                className=\"bg-green-500 px-2 py-1 rounded hover:bg-green-600\"\r\n              >\r\n                Edit\r\n              </button>\r\n              <button\r\n                onClick={() => handleDelete(user._id)}\r\n                className=\"bg-red-500 px-2 py-1 rounded hover:bg-red-600\"\r\n              >\r\n                Delete\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Createform;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}