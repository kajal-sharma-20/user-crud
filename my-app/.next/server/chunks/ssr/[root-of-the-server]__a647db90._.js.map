{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///E:/auspicious/crud/my-app/src/app/createform/page.js"],"sourcesContent":["\"use client\";\r\nimport axios from \"axios\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { FaEdit, FaTrash, FaUserPlus, FaTimes } from \"react-icons/fa\";\r\n\r\nfunction Createform() {\r\n  const [data, setData] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n  const [editId, setEditId] = useState(null);\r\n  const [users, setUsers] = useState([]);\r\n  const formRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const res = await axios.get(`${process.env.NEXT_PUBLIC_API_URL}/getallusers`);\r\n      setUsers(res.data.user.reverse());\r\n    } catch (err) {\r\n      toast.error(\"Failed to fetch users\");\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setData({ ...data, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (editId) {\r\n        const res = await axios.put(\r\n          `${process.env.NEXT_PUBLIC_API_URL}/updateuser/${editId}`,\r\n          data\r\n        );\r\n        if (res.status === 200) {\r\n          toast.success(\"User updated successfully\");\r\n        } else {\r\n          toast.error(\"Failed to update user\");\r\n        }\r\n      } else {\r\n        const res = await axios.post(\r\n          `${process.env.NEXT_PUBLIC_API_URL}/createuser`,\r\n          data\r\n        );\r\n        if (res.status === 200) {\r\n          toast.success(\"User created successfully\");\r\n        } else {\r\n          toast.error(\"Failed to create user\");\r\n        }\r\n      }\r\n\r\n      fetchUsers();\r\n      setData({ name: \"\", email: \"\", password: \"\" });\r\n      setEditId(null);\r\n    } catch (err) {\r\n      console.log(\"Submit error:\", err);\r\n      toast.error(\"Server error during submission\");\r\n    }\r\n  };\r\n\r\n  const handleEdit = (user) => {\r\n    setData({\r\n      name: user.name,\r\n      email: user.email,\r\n      password: user.password,\r\n    });\r\n    setEditId(user._id);\r\n    formRef.current.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setEditId(null); \r\n    setData({ name: \"\", email: \"\", password: \"\" }); \r\n    toast.info(\"Edit canceled\");\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      const res = await axios.delete(\r\n        `${process.env.NEXT_PUBLIC_API_URL}/deleteuser/${id}`\r\n      );\r\n      toast.success(\"User deleted successfully\");\r\n      fetchUsers();\r\n    } catch (err) {\r\n      console.log(\"Delete error:\", err);\r\n      toast.error(\"Server error during deletion\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-slate-800 to-gray-900 p-6\">\r\n      {/* FORM */}\r\n      <form\r\n        ref={formRef}\r\n        onSubmit={handleSubmit}\r\n        className=\"bg-gradient-to-br from-slate-700 to-slate-800 border border-gray-600 shadow-2xl w-full md:w-1/2 mx-auto space-y-4 p-8 rounded-xl transition-transform hover:scale-[1.01]\"\r\n      >\r\n        <h1 className=\"text-3xl font-semibold text-center text-gray-100 tracking-wide\">\r\n          {editId ? \"Edit User\" : \"Create User\"}\r\n        </h1>\r\n        <input\r\n          placeholder=\"Name\"\r\n          className=\"p-3 w-full rounded-lg bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-400 transition\"\r\n          name=\"name\"\r\n          value={data.name}\r\n          onChange={handleChange}\r\n        />\r\n        <input\r\n          placeholder=\"Email\"\r\n          className=\"p-3 w-full rounded-lg bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-400 transition\"\r\n          name=\"email\"\r\n          value={data.email}\r\n          onChange={handleChange}\r\n        />\r\n        <input\r\n          placeholder=\"Password\"\r\n          className=\"p-3 w-full rounded-lg bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-400 transition\"\r\n          name=\"password\"\r\n          value={data.password}\r\n          onChange={handleChange}\r\n        />\r\n\r\n        <div className=\"flex gap-4 justify-center\">\r\n          <button\r\n            type=\"submit\"\r\n            className=\"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg shadow transition\"\r\n          >\r\n            <FaUserPlus /> {editId ? \"Update User\" : \"Create User\"}\r\n          </button>\r\n\r\n          {editId && (\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleCancelEdit}\r\n              className=\"flex items-center gap-2 bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg shadow transition\"\r\n            >\r\n              <FaTimes /> Cancel\r\n            </button>\r\n          )}\r\n        </div>\r\n      </form>\r\n\r\n      {/* USERS LIST */}\r\n      <h2 className=\"text-gray-100 text-center mt-10 text-2xl font-semibold\">Users List</h2>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6\">\r\n        {users.map((user) => (\r\n          <div\r\n            key={user._id}\r\n            className=\"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 p-5 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-2 transition-transform\"\r\n          >\r\n            <p className=\"text-gray-200\"><strong>Name:</strong> {user.name}</p>\r\n            <p className=\"text-gray-300\"><strong>Email:</strong> {user.email}</p>\r\n            <p className=\"text-gray-400\"><strong>Password:</strong> {user.password}</p>\r\n            <div className=\"mt-4 flex gap-3\">\r\n              <button\r\n                onClick={() => handleEdit(user)}\r\n                className=\"flex items-center gap-2 bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-lg transition\"\r\n              >\r\n                <FaEdit /> Edit\r\n              </button>\r\n              <button\r\n                onClick={() => handleDelete(user._id)}\r\n                className=\"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition\"\r\n              >\r\n                <FaTrash /> Delete\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Createform;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}